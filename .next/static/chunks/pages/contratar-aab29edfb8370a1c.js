(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{4978:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/contratar",function(){return n(1818)}])},1818:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return H}});var o=n(4051),a=n.n(o),r=n(5893),l=(n(7613),n(4045),n(7294)),i=n(9669),s=n.n(i),c=n(2298),u=n(7058);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function p(e,t,n,o,a,r,l){try{var i=e[r](l),s=i.value}catch(c){return void n(c)}i.done?t(s):Promise.resolve(s).then(o,a)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){f(e,t,n[t])}))}return e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(o=n.next()).done)&&(r.push(o.value),!t||r.length!==t);l=!0);}catch(s){i=!0,a=s}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=function(e){var t,n,o,i,d,x,h,g,b=e.formData,j=e.setFormData,y=e.config,w=e.errors,N=(e.setErrors,e.position),C=e.setPosition,S=e.initPersona,P=v((0,u.$)("global"),2),O=P[0],k=(P[1],(0,c.default)(new Date,"yyyy-MM-dd")),D=(0,l.useState)(null),E=D[0],_=D[1],F=(0,l.useState)(null),q=F[0],A=F[1],I=(0,l.useState)(S),T=I[0],L=I[1],M=function(){var e,t=(e=a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s().get("https://apieurop-assistance.byflexy.com/api/v2/travel/b2c/paises");case 3:t=e.sent,n=t.data[0],_(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,n=arguments;return new Promise((function(o,a){var r=e.apply(t,n);function l(e){p(r,o,a,l,i,"next",e)}function i(e){p(r,o,a,l,i,"throw",e)}l(void 0)}))});return function(){return t.apply(this,arguments)}}();(0,l.useEffect)((function(){M(),L(b.datosPersonales),C(0)}),[]),(0,l.useEffect)((function(){Z()})),(0,l.useEffect)((function(){var e=b.datosPersonales[N],t=S;Object.keys(S).map((function(n){e[n]&&(t[n]=e[n])})),L(t)}),[N]);var z,Z=function(){if(null!=localStorage.getItem("planContratar")){var e=JSON.parse(localStorage.getItem("planContratar")).personas;if((null==q||e.length!=q.length)&&(A(e),0==N)){var t=!0,n=b.datosPersonales.map((function(e,n){return 16==Object.values(e).length&&(t=!1),e.id=n,e}));if(b.datosPersonales=n,t){var o=b;e=e.map((function(e){return e.fechaNacimiento=k,e.id=N,e})),o.datosPersonales=e,j(o)}}}},U=function(e,t){L(m({},T,f({},e,t)))};return(0,l.useEffect)((function(){var e=b.datosPersonales;e[N].id=N,e[N]=T,j(m({},b,{datosPersonales:e}))}),[T]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("header",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-8 pb-2 lg:py-6 lg:px-6",children:null===q||void 0===q?void 0:q.map((function(e,t){return(0,r.jsxs)("button",{onClick:function(){C(t)},className:"px-2 lg:px-0 rounded ".concat(t===N?"text-white lg:text-principal bg-principal lg:bg-transparent":"text-gris-medio bg-gris-claro lg:bg-transparent"),children:[O("formContratar.pasajero")," ",t+1]},t)}))}),(0,r.jsxs)("div",{className:"flex flex-col lg:grid lg:grid-cols-3 gap-4 py-6 px-6 rounded-lg shadow-3xl overflow-hidden",children:[(0,r.jsx)("p",{className:"flex-none col-span-full",children:null===y||void 0===y?void 0:y.etiquetas.Step3_DatosPasajeros}),(0,r.jsxs)("label",{className:"flex-1",htmlFor:"name",children:[(0,r.jsx)("input",{name:"name",type:"text",placeholder:null===y||void 0===y?void 0:y.etiquetas.Label_Nombres,value:null===T||void 0===T?void 0:T.nombre,onChange:function(e){U("nombre",e.target.value)},className:"w-full py-3 px-4 border border-principal rounded"}),""==(null===T||void 0===T?void 0:T.nombre)&&(0,r.jsx)("span",{className:"text-red-600",children:null===(t=w[N])||void 0===t?void 0:t.nombre})]}),(0,r.jsxs)("label",{className:"flex-1",htmlFor:"apellido",children:[(0,r.jsx)("input",{name:"lastname",type:"text",placeholder:null===y||void 0===y?void 0:y.etiquetas.Label_Apellidos,value:null===T||void 0===T?void 0:T.apellido,onChange:function(e){U("apellido",e.target.value)},className:"w-full py-3 px-4 border border-principal rounded"}),""==(null===T||void 0===T?void 0:T.apellido)&&(0,r.jsx)("span",{className:"text-red-600",children:null===(n=w[N])||void 0===n?void 0:n.apellido})]}),(0,r.jsxs)("label",{className:"flex-1",htmlFor:"sexo",children:[(0,r.jsxs)("select",{value:T.sexo,onChange:function(e){U("sexo",e.target.value)},className:"w-full py-3 px-4 border border-principal rounded",name:"genre",children:[(0,r.jsx)("option",{value:"",children:"Sexo"}),(0,r.jsx)("option",{value:"femenino",children:"Femenino"}),(0,r.jsx)("option",{value:"masculino",children:"Masculino"})]}),""==(null===T||void 0===T?void 0:T.sexo)&&(0,r.jsx)("span",{className:"text-red-600",children:null===(o=w[N])||void 0===o?void 0:o.sexo})]}),(0,r.jsxs)("label",{className:"flex-1",htmlFor:"nacionalidad",children:[(0,r.jsxs)("select",{value:null===T||void 0===T?void 0:T.nacionalidad,onChange:function(e){U("nacionalidad",e.target.value)},className:"w-full py-3 px-4 border border-principal rounded",name:"nacionalidad",children:[(0,r.jsx)("option",{value:"value1",children:null===y||void 0===y?void 0:y.etiquetas.Label_Nacionalidad}),null===E||void 0===E?void 0:E.map((function(e){return(0,r.jsx)("option",{value:e.nombre,children:e.nombre},e.id)}))]}),""==(null===T||void 0===T?void 0:T.nacionalidad)&&(0,r.jsx)("span",{className:"text-red-600",children:null===(i=w[N])||void 0===i?void 0:i.nacionalidad})]}),(0,r.jsxs)("label",{className:"flex-1",htmlFor:"dni",children:[(0,r.jsx)("input",{type:"number",name:"dni",placeholder:"DNI/C\xe9dula",value:null===T||void 0===T?void 0:T.documento,onChange:function(e){U("documento",e.target.value)},className:"w-full py-3 px-4 border border-principal rounded"}),""==(null===T||void 0===T?void 0:T.documento)&&(0,r.jsx)("span",{className:"text-red-600",children:null===(d=w[N])||void 0===d?void 0:d.documento})]}),(0,r.jsxs)("label",{className:"flex-1",htmlFor:"fecha",children:[(0,r.jsx)("input",{type:"date",name:"date",placeholder:null===y||void 0===y?void 0:y.etiquetas.Label_FechaNacimientoVoucher,value:null===T||void 0===T?void 0:T.fechaNacimiento,onChange:function(e){U("fechaNacimiento",e.target.value)},className:"w-full py-3 px-4 border border-principal rounded"}),""==(null===T||void 0===T?void 0:T.fechaNacimiento)&&(0,r.jsx)("span",{className:"text-red-600",children:null===(x=w[N])||void 0===x?void 0:x.fechaNacimiento})]}),(0,r.jsxs)("label",{className:"flex-1",htmlFor:"email",children:[(0,r.jsx)("input",{type:"email",name:"email",placeholder:null===y||void 0===y?void 0:y.etiquetas.Label_Email,value:null===T||void 0===T?void 0:T.email,onChange:function(e){U("email",e.target.value)},className:"w-full py-3 px-4 border border-principal rounded"}),(""==(null===T||void 0===T?void 0:T.email)||(z=null===T||void 0===T?void 0:T.email,!/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(z)))&&(0,r.jsx)("span",{className:"text-red-600",children:null===(h=w[N])||void 0===h?void 0:h.email})]}),(0,r.jsxs)("label",{className:"flex-1",htmlFor:"tel",children:[(0,r.jsx)("input",{type:"number",name:"telefono",placeholder:null===y||void 0===y?void 0:y.etiquetas.Label_TelefonoPersona,value:null===T||void 0===T?void 0:T.telefono,onChange:function(e){U("telefono",e.target.value)},className:"w-full py-3 px-4 border border-principal rounded"}),""==(null===T||void 0===T?void 0:T.telefono)&&(0,r.jsx)("span",{className:"text-red-600",children:null===(g=w[N])||void 0===g?void 0:g.telefono})]})]})]})})};function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){g(e,t,n[t])}))}return e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(o=n.next()).done)&&(r.push(o.value),!t||r.length!==t);l=!0);}catch(s){i=!0,a=s}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=function(e){var t,n,o,a,i,s,c,d=e.formData,p=e.setFormData,f=e.config,m=e.errors,v=(e.setErrors,e.position),x=e.setPosition,h=e.initPersona,y=e.errors2,w=e.firstChange,N=e.setFirstChange,C=j((0,u.$)("global"),2),S=C[0],P=(C[1],(0,l.useState)(null)),O=P[0],k=P[1],D=(0,l.useState)(h),E=D[0],_=D[1];(0,l.useEffect)((function(){x(0)}),[]),(0,l.useEffect)((function(){var e=d.datosPersonales[v],t=h;Object.keys(h).map((function(n){e[n]&&(t[n]=e[n])})),_(t)}),[v]),(0,l.useEffect)((function(){F()}));var F=function(){if(null!=localStorage.getItem("planContratar")){var e=JSON.parse(localStorage.getItem("planContratar")).personas;null!=O&&e.length==O.length||k(e)}},q=function(e,t){_(b({},E,g({},e,t)))};return(0,l.useEffect)((function(){var e=d.datosPersonales;e[v].id=v,w?e.map((function(t,n){var o=E.domicilioCalle,a=E.domicilioCodigoPostal,r=E.domicilioDpto,l=E.domicilioNumero,i=E.domicilioPiso,s=E.localidad,c=E.provincia;e[n].id=n,e[n].domicilioCalle=o,e[n].domicilioCodigoPostal=a,e[n].domicilioDpto=r,e[n].domicilioNumero=l,e[n].domicilioPiso=i,e[n].localidad=s,e[n].provincia=c})):(e[v]=E,e[v].id=v),p(b({},d,{datosPersonales:e}))}),[E]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("header",{className:"flex gap-4 py-6 px-6",children:[(0,r.jsx)("h1",{className:"text-xl",children:S("formContratar.datosFacturacion")}),null===O||void 0===O?void 0:O.map((function(e,t){return(0,r.jsxs)("button",{onClick:function(){N(!1),x(t)},className:"".concat(t===v?"text-white lg:text-principal bg-principal lg:bg-transparent":"text-gris-medio bg-gris-claro lg:bg-transparent"),children:["Pasajero ",t+1]},t)}))]}),(0,r.jsxs)("div",{className:"flex flex-col lg:grid lg:grid-cols-3 gap-4 py-6 px-6 rounded-lg shadow-3xl overflow-hidden",children:[(0,r.jsxs)("label",{className:"flex-1",htmlFor:"calle",children:[(0,r.jsx)("input",{type:"text",placeholder:null===f||void 0===f?void 0:f.etiquetas.Label_EjemploCalle,value:null===E||void 0===E?void 0:E.domicilioCalle,onChange:function(e){q("domicilioCalle",e.target.value)},className:"w-full py-3 px-4 border border-principal rounded"}),""==(null===E||void 0===E?void 0:E.domicilioCalle)&&(0,r.jsx)("span",{className:"text-red-600",children:null===(t=m[v])||void 0===t?void 0:t.domicilioCalle})]}),(0,r.jsxs)("label",{className:"flex-1",htmlFor:"nro",children:[(0,r.jsx)("input",{type:"number",placeholder:null===f||void 0===f?void 0:f.etiquetas.Label_NroDomicilio,value:null===E||void 0===E?void 0:E.domicilioNumero,onChange:function(e){q("domicilioNumero",e.target.value)},className:"w-full py-3 px-4 border border-principal rounded"}),""==(null===E||void 0===E?void 0:E.domicilioNumero)&&(0,r.jsx)("span",{className:"text-red-600",children:null===(n=m[v])||void 0===n?void 0:n.domicilioNumero})]}),(0,r.jsxs)("label",{className:"flex-1",htmlFor:"piso",children:[(0,r.jsx)("input",{type:"number",placeholder:null===f||void 0===f?void 0:f.etiquetas.Label_Piso,value:null===E||void 0===E?void 0:E.domicilioPiso,onChange:function(e){q("domicilioPiso",e.target.value)},className:"w-full py-3 px-4 border border-principal rounded"}),""==(null===E||void 0===E?void 0:E.domicilioPiso)&&(0,r.jsx)("span",{className:"text-red-600",children:null===(o=m[v])||void 0===o?void 0:o.domicilioPiso})]}),(0,r.jsxs)("label",{className:"flex-1",htmlFor:"depto",children:[(0,r.jsx)("input",{type:"text",placeholder:null===f||void 0===f?void 0:f.etiquetas.Label_Departamento,value:null===E||void 0===E?void 0:E.domicilioDpto,onChange:function(e){q("domicilioDpto",e.target.value)},className:"w-full py-3 px-4 border border-principal rounded"}),""==(null===E||void 0===E?void 0:E.domicilioDpto)&&(0,r.jsx)("span",{className:"text-red-600",children:null===(a=m[v])||void 0===a?void 0:a.domicilioDpto})]}),(0,r.jsxs)("label",{className:"flex-1",htmlFor:"localidad",children:[(0,r.jsx)("input",{type:"text",placeholder:null===f||void 0===f?void 0:f.etiquetas.Label_Localidad,value:null===E||void 0===E?void 0:E.localidad,onChange:function(e){q("localidad",e.target.value)},className:"w-full py-3 px-4 border border-principal rounded"}),""==(null===E||void 0===E?void 0:E.localidad)&&(0,r.jsx)("span",{className:"text-red-600",children:null===(i=m[v])||void 0===i?void 0:i.localidad})]}),(0,r.jsxs)("label",{className:"flex-1",htmlFor:"cp",children:[(0,r.jsx)("input",{type:"number",placeholder:null===f||void 0===f?void 0:f.etiquetas.Label_CodigoPostal,value:null===E||void 0===E?void 0:E.domicilioCodigoPostal,onChange:function(e){q("domicilioCodigoPostal",e.target.value)},className:"w-full py-3 px-4 border border-principal rounded"}),""==(null===E||void 0===E?void 0:E.domicilioCodigoPostal)&&(0,r.jsx)("span",{className:"text-red-600",children:null===(s=m[v])||void 0===s?void 0:s.domicilioCodigoPostal})]}),(0,r.jsxs)("label",{className:"flex-1",htmlFor:"provincia",children:[(0,r.jsx)("input",{type:"text",placeholder:null===f||void 0===f?void 0:f.etiquetas.Label_Provincia,value:null===E||void 0===E?void 0:E.provincia,onChange:function(e){q("provincia",e.target.value)},className:"w-full py-3 px-4 border border-principal rounded"}),""==(null===E||void 0===E?void 0:E.provincia)&&(0,r.jsx)("span",{className:"text-red-600",children:null===(c=m[v])||void 0===c?void 0:c.provincia})]}),0==v&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex-none col-span-full mt-4",children:[(0,r.jsx)("h2",{className:"",children:null===f||void 0===f?void 0:f.etiquetas.Title_ContactoEmergencia}),(0,r.jsx)("p",{className:"text-gris-medio",children:null===f||void 0===f?void 0:f.etiquetas.Label_SolicitudDatosEmergencia})]}),(0,r.jsxs)("label",{className:"flex-1",htmlFor:"nameContacto",children:[(0,r.jsx)("input",{type:"text",placeholder:null===f||void 0===f?void 0:f.etiquetas.Label_Nombres,value:null===d||void 0===d?void 0:d.nameContacto,onChange:function(e){p(b({},d,{nameContacto:e.target.value}))},className:"w-full py-3 px-4 border border-principal rounded"}),""==(null===d||void 0===d?void 0:d.nameContacto)&&(0,r.jsx)("span",{className:"text-red-600",children:null===y||void 0===y?void 0:y.nameContacto})]}),(0,r.jsxs)("label",{className:"flex-1",htmlFor:"apellidoContacto",children:[(0,r.jsx)("input",{type:"text",placeholder:null===f||void 0===f?void 0:f.etiquetas.Label_Apellidos,value:null===d||void 0===d?void 0:d.apellidoContacto,onChange:function(e){p(b({},d,{apellidoContacto:e.target.value}))},className:"w-full py-3 px-4 border border-principal rounded"}),""==(null===d||void 0===d?void 0:d.apellidoContacto)&&(0,r.jsx)("span",{className:"text-red-600",children:null===y||void 0===y?void 0:y.apellidoContacto})]}),(0,r.jsxs)("label",{className:"flex-1",htmlFor:"telContacto",children:[(0,r.jsx)("input",{type:"number",placeholder:null===f||void 0===f?void 0:f.etiquetas.Label_TelefonoPersona,value:null===d||void 0===d?void 0:d.telContacto,onChange:function(e){p(b({},d,{telContacto:e.target.value}))},className:"w-full py-3 px-4 border border-principal rounded"}),""==(null===d||void 0===d?void 0:d.telContacto)&&(0,r.jsx)("span",{className:"text-red-600",children:null===y||void 0===y?void 0:y.telContacto})]})]})]})]})})},w=n(818);function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){C(e,t,n[t])}))}return e}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(o=n.next()).done)&&(r.push(o.value),!t||r.length!==t);l=!0);}catch(s){i=!0,a=s}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var O=function(e){var t=e.formData,n=e.setFormData,o=e.initForm,a=(e.position,P((0,u.$)("global"),2)),i=a[0],s=(a[1],(0,c.default)(new Date,"yyyy")),d=(0,l.useState)(null),p=d[0],f=d[1],m=(0,l.useState)(o),v=m[0],x=m[1],h=(0,l.useState)(!1),g=(h[0],h[1]),b=(0,l.useRef)(!1);(0,l.useEffect)((function(){var e=[];if(0==b.current){for(var n=0;n<10;n++)parseInt(s)<s+10&&e.push(parseInt(s)+n);b.current=!0,f(e)}x(t)}),[]),(0,l.useEffect)((function(){n(v)}),[v]);var j=function(e){if(e.length<14||e.length>16)return!1;if(/[^0-9-\s]+/.test(e))return!1;for(var t=0,n=0,o=!1,a=(e=e.replace(/\D/g,"")).length-1;a>=0;a--){var r=e.charAt(a);n=parseInt(r,10);o&&(n*=2)>9&&(n-=9),t+=n,o=!o}return t%10==0};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("header",{className:"flex gap-4 py-6 px-6",children:(0,r.jsx)("h1",{className:"text-xl",children:i("formContratar.formaPago")})}),(0,r.jsxs)("div",{className:"flex flex-col lg:grid lg:grid-cols-3 gap-4 py-6 px-6 rounded-lg shadow-3xl overflow-hidden",children:[(0,r.jsx)("p",{className:"flex-none col-span-full",children:i("formContratar.formaPagoSubtitulo")}),(0,r.jsx)("label",{className:"flex-1",htmlFor:"tarjeta",children:(0,r.jsx)("input",{type:"number",placeholder:"Nro de Tarjeta",value:null===t||void 0===t?void 0:t.numeroTarjeta,onChange:function(e){var t,n;t="numeroTarjeta",n=e.target.value,x(S({},v,C({},t,n))),function(e){if(j(e)){switch(function(e){var t={visa:/^4[0-9]{12}(?:[0-9]{3})/,master:/^5[1-5][0-9]{14}/,diners:/^3(?:0[0-5]|[68][0-9])[0-9]{11}/,american:/^3[47][0-9]{13}/,discover:/^6(?:011|5[0-9]{2})[0-9]{12}/,hipercard:/^(606282\d{10}(\d{3})?)|(3841\d{15})/,elo:/^((((636368)|(438935)|(504175)|(451416)|(636297))\d{0,10})|((5067)|(4576)|(4011))\d{0,12})/,jcb:/^(?:2131|1800|35\d{3})\d{11}/};for(var n in t)if(t[n].test(e))return n}(e)){case"visa":v.tipoTarjeta="1";break;case"master":v.tipoTarjeta="15";break;case"american":v.tipoTarjeta="65"}""!=v.tipoTarjeta?(g(!0),v.numeroTarjeta=e,console.log(v),x(v)):g(!1)}}(e.target.value)},className:"w-full py-3 px-4 border border-principal rounded"})}),(0,r.jsx)("label",{className:"flex-1",htmlFor:"cuotas",children:(0,r.jsxs)("select",{name:"cuotas",className:"w-full py-3 px-4 border border-principal rounded",onChange:function(e){n(S({},t,{cuotas:e.target.value}))},children:[(0,r.jsx)("option",{value:"value1",children:i("formContratar.cuotas")}),(0,r.jsx)("option",{value:"1",children:"1"}),(0,r.jsx)("option",{value:"2",children:"2"}),(0,r.jsx)("option",{value:"3",children:"3"})]})}),(0,r.jsx)("label",{className:"flex-1",htmlFor:"mesVencimiento",children:(0,r.jsxs)("select",{name:"mesVencimiento",className:"w-full py-3 px-4 border border-principal rounded",onChange:function(e){n(S({},t,{mesVencimiento:e.target.value}))},children:[(0,r.jsx)("option",{value:"value1",children:i("formContratar.vtoMes")}),(0,r.jsx)("option",{value:"01",children:"01"}),(0,r.jsx)("option",{value:"02",children:"02"}),(0,r.jsx)("option",{value:"03",children:"03"}),(0,r.jsx)("option",{value:"04",children:"04"}),(0,r.jsx)("option",{value:"05",children:"05"}),(0,r.jsx)("option",{value:"06",children:"06"}),(0,r.jsx)("option",{value:"07",children:"07"}),(0,r.jsx)("option",{value:"08",children:"08"}),(0,r.jsx)("option",{value:"09",children:"09"}),(0,r.jsx)("option",{value:"10",children:"10"}),(0,r.jsx)("option",{value:"11",children:"11"}),(0,r.jsx)("option",{value:"12",children:"12"})]})}),(0,r.jsx)("label",{className:"flex-1",htmlFor:"anioVencimiento",children:(0,r.jsxs)("select",{name:"anioVencimiento",className:"w-full py-3 px-4 border border-principal rounded",onChange:function(e){n(S({},t,{anioVencimiento:e.target.value}))},children:[(0,r.jsx)("option",{value:"value1",children:i("formContratar.vtoAnio")}),null===p||void 0===p?void 0:p.map((function(e,t){return(0,r.jsx)("option",{value:e.toString().slice(-2),children:e.toString()},t)}))]})}),(0,r.jsx)("label",{className:"flex-1",htmlFor:"codigo",children:(0,r.jsx)("input",{type:"text",placeholder:"C\xf3d. seg.",value:null===t||void 0===t?void 0:t.codigoSeguridad,onChange:function(e){n(S({},t,{codigoSeguridad:e.target.value}))},className:"w-full py-3 px-4 border border-principal rounded"})}),(0,r.jsx)("h2",{className:"flex-none col-span-full mt-4",children:i("formContratar.titularTarjeta")}),(0,r.jsx)("label",{className:"flex-1",htmlFor:"titular",children:(0,r.jsx)("input",{type:"text",placeholder:"Nombre y Apellido",value:null===t||void 0===t?void 0:t.titular,onChange:function(e){n(S({},t,{titular:e.target.value}))},className:"w-full py-3 px-4 border border-principal rounded"})}),(0,r.jsx)("label",{className:"flex-1",htmlFor:"dniTitular",children:(0,r.jsx)("input",{type:"number",placeholder:"Documento Nro.",value:null===t||void 0===t?void 0:t.dniTitular,onChange:function(e){n(S({},t,{dniTitular:e.target.value}))},className:"w-full py-3 px-4 border border-principal rounded"})})]})]})})},k=(n(1778),n(1163)),D=n(2388),E=n(8021),_=n(1955);function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function q(e,t,n,o,a,r,l){try{var i=e[r](l),s=i.value}catch(c){return void n(c)}i.done?t(s):Promise.resolve(s).then(o,a)}function A(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var r=e.apply(t,n);function l(e){q(r,o,a,l,i,"next",e)}function i(e){q(r,o,a,l,i,"throw",e)}l(void 0)}))}}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){I(e,t,n[t])}))}return e}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(o=n.next()).done)&&(r.push(o.value),!t||r.length!==t);l=!0);}catch(s){i=!0,a=s}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var M=function(e){var t=function(e){var t=new Date,n=new Date(e),o=t.getFullYear()-n.getFullYear(),a=t.getMonth()-n.getMonth();return(a<0||0===a&&t.getDate()<n.getDate())&&o--,o},n=L((0,u.$)("global"),2),o=n[0],i=(n[1],(0,k.useRouter)()),d={id:0,nombre:"",apellido:"",sexo:"",nacionalidad:"",documento:"",fechaNacimiento:(0,c.default)(new Date,"yyyy-MM-dd"),email:"",telefono:"",domicilioCalle:"",domicilioNumero:"",domicilioPiso:"",domicilioDpto:"",domicilioCodigoPostal:"",localidad:"",provincia:""},p={datosPersonales:[],titular:"",dniTitular:"",numeroTarjeta:"",mesVencimiento:"",anioVencimiento:"",codigoSeguridad:"",cuotas:"",tipoTarjeta:"",nameContacto:"",apellidoContacto:"",telContacto:""},f=(0,l.useState)(0),m=f[0],v=f[1],h=(0,l.useState)(p),g=h[0],b=h[1],j=(0,l.useState)(p),N=(j[0],j[1],(0,l.useState)(null)),C=(N[0],N[1]),S=(0,l.useState)(p),P=S[0],F=S[1],q=(0,E.ZR)(),I=q.config,M=q.setConfig,z=L((0,D._)("etiquetas",""),2),Z=z[0],U=(z[1],(0,l.useState)(!1)),V=U[0],$=U[1],R=(0,l.useState)(0),J=R[0],B=R[1],H=(0,l.useState)(!0),W=H[0],X=H[1],Y=(0,l.useState)(null),G=Y[0],K=Y[1],Q=(0,l.useState)(!0),ee=Q[0],te=Q[1],ne=(0,l.useState)(!1),oe=ne[0],ae=ne[1];(0,l.useEffect)((function(){localStorage.getItem("etiquetas")?M(Z):re()}),[]);var re=function(){var e=A(a().mark((function e(){var t,n,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=_.Z.get("location"),e.next=4,s().get("https://apieurop-assistance.byflexy.com/api/v2/travel/b2c/config?codigo="+t);case 4:n=e.sent,o=n.data[0],M(o),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),le=function(){var n=A(a().mark((function n(){var o,r,l,i,c,u,d,p;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o=_.Z.get("cotizacionID"),n.next=4,s().get("https://apieurop-assistance.byflexy.com/api/v2/travel/b2c/cotizacion?cotizacionId="+o);case 4:r=n.sent,l=r.data[0],i=l,c=Object.entries(g.datosPersonales),u=c.filter((function(e,t){return t<18})),d=Object.fromEntries(u),p=[],i.personas=i.personas.map((function(e,n){var o=d[n].fechaNacimiento.split("-");return e.id=0,e.nombre=d[n].nombre,e.apellido=d[n].apellido,e.documento=d[n].documento,e.sexo="masculino"==d[n].sexo.toLowerCase()?"H":"F",e.email=d[n].email,e.telefono=d[n].telefono,e.edad=t(d[n].fechaNacimiento),p.push(e.edad),e.contactoEmergencia=d[n].contactoEmergencia,e.fechaNacimiento=d[n].fechaNacimiento,e.domicilioCalle=d[n].domicilioCalle,e.domicilioNumero=d[n].domicilioNumero,e.domicilioPiso=d[n].domicilioPiso,e.domicilioDpto=d[n].domicilioDpto,e.domicilioCodigoPostal=d[n].domicilioCodigoPostal,e.localidad=d[n].localidad,e.provincia=d[n].provincia,e.nacionalidad=d[n].nacionalidad,e.anio=parseInt(o[0]),e.mes=parseInt(o[1]),e.dia=parseInt(o[2]),e})),i.productos=[e.producto],i.productos[0].personas=i.personas,i.productos[0].edades=p,i.edades=p,i.nombreEmergencia=g.apellidoContacto,i.apellidoEmergencia=g.nameContacto,i.telefonoEmergencia=g.telContacto,i.terminosCondicionesAceptados=!0,C(i),ie(i),n.next=27;break;case 24:n.prev=24,n.t0=n.catch(0),console.log(n.t0);case 27:case"end":return n.stop()}}),n,null,[[0,24]])})));return function(){return n.apply(this,arguments)}}(),ie=function(){var e=A(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,K(t.personas),e.next=4,s().post("https://apieurop-assistance.byflexy.com/api/v2/travel/b2c/cotizacion/datospersonales",t);case 4:return n=e.sent,e.next=7,n.data[0];case 7:e.sent,X(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){for(var e=[],t=0;t<g.datosPersonales.length;t++)e.push(T({},g.datosPersonales[t],{nombre:"",apellido:"",sexo:"",nacionalidad:"",documento:"",fechaNacimiento:"",email:"",telefono:""}));return g.datosPersonales.map((function(t,n){e[n].valid=!0,Object.keys(t).map((function(o,a){switch(o){case"nombre":""==Object.values(t)[a]&&(e[n].nombre="Campo requerido",e[n].valid=!1);break;case"apellido":""==Object.values(t)[a]&&(e[n].apellido="Campo requerido",e[n].valid=!1);break;case"sexo":""==Object.values(t)[a]&&(e[n].sexo="Campo requerido",e[n].valid=!1);break;case"nacionalidad":""==Object.values(t)[a]&&(e[n].nacionalidad="Campo requerido",e[n].valid=!1);break;case"documento":""==Object.values(t)[a]&&(e[n].documento="Campo requerido",e[n].valid=!1);break;case"email":""!=Object.values(t)[a]&&(r=Object.values(t)[a],/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(r))||(e[n].email="Email invalido",e[n].valid=!1);break;case"telefono":""==Object.values(t)[a]&&(e[n].telefono="Campo requerido",e[n].valid=!1)}var r}))})),e},ce=function(){for(var e=[],t=0;t<g.datosPersonales.length;t++)e.push(T({},g.datosPersonales[t],{domicilioCalle:"",domicilioNumero:"",domicilioPiso:"",domicilioDpto:"",domicilioCodigoPostal:"",localidad:"",provincia:""}));return g.datosPersonales.map((function(t,n){e[n].valid=!0,Object.keys(t).map((function(o,a){switch(o){case"domicilioCalle":""==Object.values(t)[a]&&(e[n].domicilioCalle="Campo requerido",e[n].valid=!1);break;case"domicilioNumero":""==Object.values(t)[a]&&(e[n].domicilioNumero="Campo requerido",e[n].valid=!1);break;case"domicilioCodigoPostal":""==Object.values(t)[a]&&(e[n].domicilioCodigoPostal="Campo requerido",e[n].valid=!1);break;case"localidad":""==Object.values(t)[a]&&(e[n].localidad="Campo requerido",e[n].valid=!1);break;case"provincia":""==Object.values(t)[a]&&(e[n].provincia="Campo requerido",e[n].valid=!1)}}))})),e},ue=function(){var e=A(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ae(!0),console.log("cotizacion",t),e.prev=2,e.next=5,s().post("https://apieurop-assistance.byflexy.com/api/v2/travel/b2c/cotizacion/emitir",t);case 5:i.push("/gracias"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log("err =>",e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){(0,w.eB)().then((function(e){var t=[{titular:g.titular,dniTitular:g.dniTitular,tipoTarjeta:g.tipoTarjeta,numeroTarjeta:g.numeroTarjeta,mesVencimiento:g.mesVencimiento,anioVencimiento:g.anioVencimiento,codigoSeguridad:g.codigoSeguridad,cuotas:g.cuotas}];e.tarjetas=t;var n=JSON.parse(localStorage.getItem("planContratar"));n=n.producto,e.personas=G,e.productos.push(n),e.medioDePago="argentina"==_.Z.get("location").toLowerCase()?"Decidir":"D-local",ue(e)}))};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"lg:text-xl mb-2",children:o("formContratar.subtitulo")}),(0,r.jsx)("nav",{children:(0,r.jsxs)("div",{className:"flex gap-4 justify-around lg:rounded-lg bg-transparent lg:bg-gris-claro",children:[(0,r.jsxs)("button",{className:"flex-1 flex gap-3 items-center btn py-3 lg:py-6 px-8 ".concat(0===m?"text-white lg:text-principal bg-principal lg:bg-transparent":"text-gris-medio bg-gris-claro lg:bg-transparent"),children:[(0,r.jsx)("span",{className:"w-full lg:w-6 lg:h-6 lg:rounded-full lg:border border-current flex items-center justify-center text-2xl lg:text-base",children:"1"}),(0,r.jsx)("span",{className:"hidden lg:inline",children:null===I||void 0===I?void 0:I.etiquetas.Step2_DatosPasajeros})]}),(0,r.jsxs)("button",{className:"flex-1 flex gap-3 items-center btn py-3 lg:py-6 px-8 ".concat(1===m?"text-white lg:text-principal bg-principal lg:bg-transparent":"text-gris-medio bg-gris-claro lg:bg-transparent"),children:[(0,r.jsx)("span",{className:"w-full lg:w-6 lg:h-6 lg:rounded-full lg:border border-current flex items-center justify-center text-2xl lg:text-base",children:"2"}),(0,r.jsx)("span",{className:"hidden lg:inline w-max",children:"Estas muy cerca de tu viaje"})]}),(0,r.jsxs)("button",{className:"flex-1 flex gap-3 items-center btn py-3 lg:py-6 px-8 ".concat(2===m?"text-white lg:text-principal bg-principal lg:bg-transparent":"text-gris-medio bg-gris-claro lg:bg-transparent"),children:[(0,r.jsx)("span",{className:"w-full lg:w-6 lg:h-6 lg:rounded-full lg:border border-current flex items-center justify-center text-2xl lg:text-base",children:"3"}),(0,r.jsx)("span",{className:"hidden lg:inline",children:null===I||void 0===I?void 0:I.etiquetas.Step5_DatosPasajeros})]})]})}),function(){switch(m){case 0:return(0,r.jsx)(x,{initPersona:d,position:J,setPosition:B,formData:g,setFormData:b,config:I,errors:P.datosPersonales,setErrors:F});case 1:return(0,r.jsx)(y,{firstChange:ee,setFirstChange:te,initPersona:d,position:J,setPosition:B,formData:g,setFormData:b,config:I,errors2:P,errors:P.datosPersonales,setErrors:F});case 2:return(0,r.jsx)(O,{initForm:p,formData:g,position:J,setFormData:b,config:I,errors:P,setErrors:F});default:return null}}(),(0,r.jsxs)("footer",{className:"flex flex-col md:flex-row flex-wrap gap-4 py-8",children:[(0,r.jsx)("button",{className:"py-5 px-6 btn focus:text-principal hover:text-principal btn-gris w-full lg:w-56 text-xl font-bold lg:font-normal disabled:hidden ".concat(0==m?"lg:disabled:hidden":"lg:disabled:block"),disabled:0==m,onClick:function(){v((function(e){return e-1}))},children:o("buttons.anterior")}),(0,r.jsx)("button",{className:"py-5 px-6 btn btn-amarillo w-full lg:w-56 text-xl font-bold lg:font-normal",onClick:function(){!function(e){var t=!1;switch(e){case 0:var n=se(),o=P;o.datosPersonales=n,F(o);var a=!0;n.map((function(e){e.valid||(a=!1)})),t=a,X(a),t&&v((function(e){return e+1}));break;case 1:var r=ce(),l=P;l.datosPersonales=r,F(l);var i=!0;r.map((function(e){e.valid||(i=!1)})),i&&(l.valid=!0,Object.keys(g).map((function(e,t){switch(e){case"nameContacto":""==Object.values(g)[t]&&(l.nameContacto="Campo requerido",l.valid=!1);break;case"apellidoContacto":""==Object.values(g)[t]&&(l.apellidoContacto="Campo requerido",l.valid=!1);break;case"telContacto":""==Object.values(g)[t]&&(l.telContacto="Campo requerido",l.valid=!1)}}))),t=i&&l.valid,X(i&&l.valid),t&&v((function(e){return e+1}));break;case 2:(t=de())&&ue()}t&&1==e&&le()}(m),$(!0),setTimeout((function(){$(!1)}),500)},children:m===["Paso 1","Paso 2","Paso 3"].length-1?"".concat(o("buttons.pagar")):null===I||void 0===I?void 0:I.etiquetas.Button_Continuar}),V&&!W&&(0,r.jsx)("div",{className:"flex items-center justify-center w-20 h-10 mt-5 bg-white bg-opacity-20",children:(0,r.jsx)("img",{src:"assets/images/BUSCANDO.gif",className:"flex mx-auto"})}),!V&&!W&&function(){var e=null;return 0==m&&se().map((function(t,n){t.valid||(null!=e?e+="  |  ".concat(o("formContratar.pasajero")," ").concat(n+1):e=" ".concat(o("formContratar.pasajero")," ")+(n+1))})),1==m&&ce().map((function(t,n){t.valid||(e=" Datos de facturacion ")})),null!=e?(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)("p",{children:[o("formContratar.completarPasajero")," ",(0,r.jsx)("strong",{children:e})]})}):null}(),oe&&(0,r.jsx)("div",{className:"fixed z-50 inset-0 w-full h-full flex items-center justify-center bg-white bg-opacity-60",children:(0,r.jsx)("img",{src:"assets/images/BUSCANDO.gif",className:"flex mx-auto"})})]})]})},z=n(5154),Z=(n(8464),n(7872));function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function V(e,t,n,o,a,r,l){try{var i=e[r](l),s=i.value}catch(c){return void n(c)}i.done?t(s):Promise.resolve(s).then(o,a)}function $(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var r=e.apply(t,n);function l(e){V(r,o,a,l,i,"next",e)}function i(e){V(r,o,a,l,i,"throw",e)}l(void 0)}))}}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){R(e,t,n[t])}))}return e}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(o=n.next()).done)&&(r.push(o.value),!t||r.length!==t);l=!0);}catch(s){i=!0,a=s}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e){e.initialLocation;var t=e.cotizacion,n=e.id_contratar,o=(0,k.useRouter)(),i=n||void 0,c=(0,l.useState)(null),u=c[0],d=c[1],p=(0,l.useState)(""),f=p[0],m=p[1],v=(0,l.useState)(null),x=v[0],h=v[1],g=(0,Z.TH)(),b=(g.location,g.setLocation),j=(0,l.useState)(0),y=j[0],N=j[1],C=(0,E.ZR)(),S=C.config,P=C.setConfig,O=B((0,z._)("etiquetas",""),2),D=O[0],F=O[1];(0,l.useEffect)((function(){void 0!=i?q():L(t)}),[]);var q=function(){var e=$(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.prev=1,e.next=4,s().get("https://apieurop-assistance.byflexy.com/api/v2/shares/"+i+"/detail");case 4:null==(n=e.sent).data.response&&o.push("/home"),t=JSON.parse(n.data.response.json),t=JSON.parse(t).data,localStorage.setItem("planContratar",JSON.stringify(t.producto)),d(t.producto),A(t.producto.regionId),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log("error 1:",e.t0);case 16:navigator.geolocation.getCurrentPosition((function(e){var n=e.coords,o="https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=".concat(n.latitude,"&lon=").concat(n.longitude);fetch(o).then((function(e){return e.json()})).then((function(e){var n=e.address.country.toLowerCase();_.Z.set("location",n),b(_.Z.get("location")),I(t)}))}),(function(e){console.log("no se pudo acceder a la geolocalizacion");var t="ARGENTINA";b(t),_.Z.set("location",t)}));case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),A=function(e){(0,w.ur)(_.Z.get("location")).then((function(t){var n=t.filter((function(t){return t.id==e}));m(n[0].nombreB2C)}))},I=function(e){(0,w.FS)(_.Z.get("location")).then((function(t){_.Z.set("promoActual",JSON.stringify(t)),e.producto.promocion=t,U(e)}))},T=function(e,t){var n=new Date(e[0],e[1]-1,e[2]),o=new Date(t[0],t[1]-1,t[2]),a=o>n?o-n:n-o,r=Math.floor(a/864e5);N(r)},L=function(){var e=$(a().mark((function e(){var t,n,o,r,l,i,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=_.Z.get("cotizacionID"),n=JSON.parse(localStorage.getItem("planContratar")),d(n),T(n.fechaDesde.split(" ")[0].split("/").reverse(),n.fechaHasta.split(" ")[0].split("/").reverse()),e.next=7,s().get("https://apieurop-assistance.byflexy.com/api/v2/travel/b2c/search?cotizacionId="+t);case 7:o=e.sent,r=o.data[0],l=null,r.productos.map((function(e,t){e.producto.id==n.producto.id&&(l=e)})),(i={}).cotizacionId=t,c=JSON.parse(_.Z.get("promoActual")),i.producto=J({},l,{id:n.id,producto:l.producto,promocion:c}),i.personas=i.producto.personas,h(i.producto),m(r.region),U(i),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=$(a().mark((function e(t){var n,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s().post("https://apieurop-assistance.byflexy.com/api/v2/travel/b2c/cotizacion/producto",t);case 3:n=e.sent,o=n.data[0],_.Z.set("cotizacionID",o.cotizacionId),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=$(a().mark((function e(){var t,n,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="LAT",void 0!=_.Z.get("location")&&(t=_.Z.get("location")),e.next=5,s().get("https://apieurop-assistance.byflexy.com/api/v2/travel/b2c/config?codigo="+t);case 5:n=e.sent,o=n.data[0],P(o),F(o),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){localStorage.getItem("etiquetas")?P(D):V()}),[]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("section",{className:"w-full text-principal",children:[(0,r.jsx)("h1",{className:"max-w-screen-xl mx-auto text-4xl font-extrabold pt-8 lg:pt-14 pb-2 px-6 2xl:px-0",children:null===S||void 0===S?void 0:S.etiquetas.Title_Contratacion}),(0,r.jsxs)("div",{className:"max-w-screen-xl mx-auto flex flex-col lg:flex-row justify-center gap-6 lg:gap-8 px-6 2xl:px-0 pb-14",children:[(0,r.jsx)("div",{className:"flex-1 flex flex-col",children:(0,r.jsx)(M,{producto:x})}),(0,r.jsxs)("div",{className:"lg:w-1/4 hidden lg:flex flex-col",children:[(0,r.jsx)("h2",{className:"lg:text-xl mb-2",children:"Detalle de tu compra"}),(0,r.jsx)("article",{className:"flex flex-col rounded-lg shadow-3xl overflow-hidden",children:null!=u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("header",{className:"w-full py-6 px-8 bg-turquesa",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold",children:u.producto.nombreB2C}),(0,r.jsx)("p",{className:"font-light",children:u.producto.descripcion})]}),(0,r.jsxs)("div",{className:"w-full py-6 px-8 flex flex-col gap-1",children:[y?(0,r.jsxs)("h2",{className:"font-bold",children:["Estad\xeda de ",y," d\xedas  "]}):(0,r.jsx)(r.Fragment,{}),(0,r.jsxs)("p",{className:"flex gap-3 items-center text-sm font-light",children:[(0,r.jsx)("span",{className:"icon-calendario text-lg text-gris-medio"}),"Del ",u.fechaDesde," al ",u.fechaHasta]}),(0,r.jsxs)("p",{className:"flex gap-3 items-center text-sm font-light",children:[(0,r.jsx)("span",{className:"icon-pasajeros text-lg text-gris-medio"}),u.personas.length," pas."]}),(0,r.jsxs)("p",{className:"flex gap-3 items-center text-sm font-light",children:[(0,r.jsx)("span",{className:"icon-marker text-lg text-gris-medio"}),f]}),(0,r.jsxs)("div",{className:"flex gap-3 items-center justify-between border-t-2 border-gris-claro pt-5 mt-5",children:[(0,r.jsx)("p",{className:"font-extrabold text-lg",children:"TOTAL"}),(0,r.jsxs)("p",{className:"flex-1 flex flex-col items-end",children:[(0,r.jsxs)("span",{className:"text-gris-medio line-through font-light text-sm leading-none",children:[u.monedaLocalSimbolo," ",(0,z.ao)(u.precioSinPromocion*parseFloat(u.tipoDeCambioMonto))]}),(0,r.jsxs)("span",{className:"text-lg font-extrabold",children:[u.monedaLocalSimbolo," ",(0,z.ao)(u.precioEnPesos)]}),(0,r.jsxs)("span",{className:"text-lg leading-none",children:[u.monedaSimbolo," ",(0,z.ao)(u.precio)]})]})]})]})]}):null})]})]})]})})}H.getInitialProps=function(e){console.log("======================================="),console.log("parametros :",e.query),console.log("=======================================");var t=(0,z.jl)(e.req);return{initialLocation:t.location,cotizacion:t.cotizacionID,id_contratar:e.query.idContratar}}},1778:function(e,t,n){"use strict";n.r(t);var o=n(4051),a=n.n(o),r=n(5893),l=n(573),i=n(7294),s=n(1163),c=n(818),u=n(2298),d=n(9669),p=n.n(d),f=n(1955);function m(e,t,n,o,a,r,l){try{var i=e[r](l),s=i.value}catch(c){return void n(c)}i.done?t(s):Promise.resolve(s).then(o,a)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var r=e.apply(t,n);function l(e){m(r,o,a,l,i,"next",e)}function i(e){m(r,o,a,l,i,"throw",e)}l(void 0)}))}}t.default=function(){(0,s.useRouter)();var e=(0,i.useState)(0),t=e[0],n=e[1],o=(0,i.useState)(null),d=o[0],m=o[1];(0,i.useEffect)((function(){(0,c.eB)().then((function(e){m(e.emisionId);var t=(0,u.default)(new Date,"yyyy-MM-dd"),o=new Date(e.desde).toISOString().slice(0,10),a=h(t.split(" ")[0].split("-"),o.split(" ")[0].split("-"));n(a),x(e.emisionId)}))}),[]);var x=function(){var e=v(a().mark((function e(t){var n,o,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=f.Z.get("location").toUpperCase(),e.next=4,p().get("https://apieurop-assistance.byflexy.com/api/v2/travel/b2c/voucher/enviar?emisionId="+t+"&codigoUsuario="+n);case 4:o=e.sent,r=o.data[0],console.log("res enviar: ",r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),h=function(e,t){var n=new Date(e[0],e[1]-1,e[2]),o=new Date(t[0],t[1]-1,t[2]),a=o>n?o-n:n-o;return Math.floor(a/864e5)},g=function(){var e=v(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p().get("https://apieurop-assistance.byflexy.com/api/v2/travel/b2c/voucher/download?emisionId="+d);case 3:t=e.sent,n=t.data[0],console.log("res enviar: ",n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{banner:"gracias"}),(0,r.jsx)("section",{className:"w-full bg-gris-claro text-principal",children:(0,r.jsxs)("div",{className:"max-w-screen-md mx-auto flex flex-col gap-6 lg:gap-8 items-center text-center px-6 2xl:px-0 py-14",children:[(0,r.jsxs)("header",{children:[(0,r.jsxs)("h3",{className:"text-3xl sm:text-4xl font-extrabold",children:["Estas a ",t&&t," d\xedas ",(0,r.jsx)("span",{className:"whitespace-nowrap",children:"de tu viaje!"})]}),(0,r.jsxs)("h2",{className:"text-3xl sm:text-4xl font-extrabold",children:["Con ",(0,r.jsx)("span",{className:"whitespace-nowrap",children:"Europ Assistance"})," viaj\xe1s tranquilo."]})]}),(0,r.jsxs)("p",{className:"text-xl",children:["Record\xe1 llevar con vos el voucher de tu viaje, que seguramente lo ten\xe9s en tu casilla de e-mail. Sino en todo caso pod\xe9s",(0,r.jsx)("button",{onClick:function(){g()},className:"pl-2 whitespace-nowrap font-extrabold",children:" descargar el voucher ac\xe1"})]}),(0,r.jsx)("p",{className:"text-xl",children:"Por cualquier duda o consulta escribinos por mail o hablamos por Whatsapp."}),(0,r.jsxs)("footer",{className:"flex gap-4",children:[(0,r.jsx)("button",{className:"py-5 px-6 btn btn-celeste lg:w-56",children:"Escribir mail"}),(0,r.jsx)("button",{className:"py-5 px-6 btn btn-amarillo lg:w-56",children:"Chat por Whatsapp"})]})]})})]})}},738:function(e){(()=>{"use strict";"undefined"!==typeof __nccwpck_require__&&(__nccwpck_require__.ab="//");var t={};(()=>{var e=t;e.parse=function(e,t){if("string"!==typeof e)throw new TypeError("argument str must be a string");for(var o={},r=t||{},i=e.split(a),s=r.decode||n,c=0;c<i.length;c++){var u=i[c],d=u.indexOf("=");if(!(d<0)){var p=u.substr(0,d).trim(),f=u.substr(++d,u.length).trim();'"'==f[0]&&(f=f.slice(1,-1)),void 0==o[p]&&(o[p]=l(f,s))}}return o},e.serialize=function(e,t,n){var a=n||{},l=a.encode||o;if("function"!==typeof l)throw new TypeError("option encode is invalid");if(!r.test(e))throw new TypeError("argument name is invalid");var i=l(t);if(i&&!r.test(i))throw new TypeError("argument val is invalid");var s=e+"="+i;if(null!=a.maxAge){var c=a.maxAge-0;if(isNaN(c)||!isFinite(c))throw new TypeError("option maxAge is invalid");s+="; Max-Age="+Math.floor(c)}if(a.domain){if(!r.test(a.domain))throw new TypeError("option domain is invalid");s+="; Domain="+a.domain}if(a.path){if(!r.test(a.path))throw new TypeError("option path is invalid");s+="; Path="+a.path}if(a.expires){if("function"!==typeof a.expires.toUTCString)throw new TypeError("option expires is invalid");s+="; Expires="+a.expires.toUTCString()}a.httpOnly&&(s+="; HttpOnly");a.secure&&(s+="; Secure");if(a.sameSite){switch("string"===typeof a.sameSite?a.sameSite.toLowerCase():a.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return s};var n=decodeURIComponent,o=encodeURIComponent,a=/; */,r=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function l(e,t){try{return t(e)}catch(t){return e}}})(),e.exports=t})()},8464:function(e,t,n){"use strict";const o="x-prerender-revalidate";const a="x-prerender-revalidate-if-generated";const r="__prerender_bypass";const l="__next_preview_data";Symbol(l);const i=Symbol(r);class s extends Error{constructor(e,t){super(t),this.statusCode=e}}}},function(e){e.O(0,[253,573,774,888,179],(function(){return t=4978,e(e.s=t);var t}));var t=e.O();_N_E=t}]);